version: '3.1'

intents:
  - greet
  - goodbye
  - ask_weather
  - recommend_packing
  - faq_what_is_rasa
  - faq_who_built_you
  - faq_trip_planning
  - inform
  - affirm
  - deny
  - nlu_fallback
  - start_travel_planning

entities:
  - location
  - date
  - travel_dates

slots:
  destination_city:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: location
      - type: from_text
        conditions:
          - active_loop: travel_info_form
            requested_slot: destination_city
  start_date:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: date
      - type: from_text
        conditions:
          - active_loop: travel_info_form
            requested_slot: start_date
  end_date:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: travel_dates
      - type: from_text
        conditions:
          - active_loop: travel_info_form
            requested_slot: end_date
  weather_info:
    type: text
    influence_conversation: false
    mappings:
      - type: custom
  packing_suggestions:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

forms:
  travel_info_form:
    required_slots:
      - destination_city
      - start_date
      - end_date

responses:
  # Other responses remain the same... (utter_greet, utter_goodbye, etc.)
  # --- PASTE YOUR OTHER RESPONSES HERE ---

  utter_greet:
    - text: "ğŸ§³ Welcome to your Travel Assistant Bot! I'm here to help you plan your perfect trip."
      buttons:
        - title: "ğŸŒ¤ï¸ Check Weather"
          payload: "/ask_weather"
        - title: "ğŸ’ Get Packing Tips"
          payload: "/recommend_packing"
        - title: "ğŸ“‹ Plan Complete Trip"
          payload: "/start_travel_planning"
        - title: "â“ FAQ & Help"
          payload: "/faq_trip_planning"

  utter_goodbye:
    - text: "Safe travels! Have a wonderful trip! ğŸŒŸ Feel free to come back anytime for travel assistance."
      buttons:
        - title: "ğŸ”„ Start New Planning"
          payload: "/greet"

  utter_ask_destination_city:
    - text: "Which city are you planning to visit? ğŸ™ï¸"
      buttons:
        - title: "Popular: Delhi"
          payload: '/inform{"location":"Delhi"}'
        - title: "Popular: Mumbai"
          payload: '/inform{"location":"Mumbai"}'
        - title: "Popular: Paris"
          payload: '/inform{"location":"Paris"}'
        - title: "Type Custom City"
          payload: "I want to visit a different city"

  utter_ask_start_date:
    - text: "When are you planning to start your trip? ğŸ“…"
      buttons:
        - title: "This Weekend"
          payload: '/inform{"date":"this weekend"}'
        - title: "Next Week"
          payload: '/inform{"date":"next week"}'
        - title: "Next Month"
          payload: '/inform{"date":"next month"}'
        - title: "Type Specific Date"
          payload: "I want to specify exact date"

  utter_ask_end_date:
    - text: "When will you return from your trip? ğŸ”™"
      buttons:
        - title: "Same Day Return"
          payload: '/inform{"travel_dates":"same day"}'
        - title: "Weekend Trip (2-3 days)"
          payload: '/inform{"travel_dates":"weekend trip"}'
        - title: "One Week"
          payload: '/inform{"travel_dates":"one week"}'
        - title: "Type Custom Duration"
          payload: "I want to specify exact return date"

  utter_faq_what_is_rasa:
    - text: "ğŸ¤– Rasa is an open-source framework for building conversational AI assistants and chatbots. It provides tools for natural language understanding, dialogue management, and integration with external systems."
      buttons:
        - title: "ğŸ  Back to Main Menu"
          payload: "/greet"
        - title: "ğŸ‘¨â€ğŸ’» Who built this bot?"
          payload: "/faq_who_built_you"
        - title: "ğŸ§³ Start Trip Planning"
          payload: "/start_travel_planning"

  utter_faq_who_built_you:
    - text: "ğŸ‘¨â€ğŸ’» I'm a Travel Assistant Bot built using the Rasa framework for the Yoliday Internship Assessment. I was created to help travelers get weather information and packing recommendations for their trips."
      buttons:
        - title: "ğŸ  Back to Main Menu"
          payload: "/greet"
        - title: "ğŸ¤– What is Rasa?"
          payload: "/faq_what_is_rasa"
        - title: "ğŸ“‹ How to plan trips?"
          payload: "/faq_trip_planning"

  utter_faq_how_to_plan_trip:
    - text: "âœˆï¸ I can help you plan your trip in several ways:\n\nğŸŒ¤ï¸ **Weather Forecasts** - Get current weather for any destination\nğŸ’ **Smart Packing** - Recommendations based on weather conditions\nğŸ“‹ **Complete Planning** - Full trip planning with dates and details\nâ“ **24/7 Support** - Ask me anything about travel planning!"
      buttons:
        - title: "ğŸŒ¤ï¸ Check Weather Now"
          payload: "/ask_weather"
        - title: "ğŸ’ Get Packing Tips"
          payload: "/recommend_packing"
        - title: "ğŸ“‹ Start Full Planning"
          payload: "/start_travel_planning"
        - title: "ğŸ  Main Menu"
          payload: "/greet"

  utter_default_fallback:
    - text: "ğŸ¤” I didn't quite understand that. I'm specialized in travel assistance. Here's what I can help you with:"
      buttons:
        - title: "ğŸŒ¤ï¸ Weather Information"
          payload: "/ask_weather"
        - title: "ğŸ’ Packing Suggestions"
          payload: "/recommend_packing"
        - title: "ğŸ“‹ Complete Trip Planning"
          payload: "/start_travel_planning"
        - title: "â“ FAQ & Help"
          payload: "/faq_trip_planning"

  utter_submit:
    - text: "Perfect! Let me get the weather information and packing suggestions for your trip to {destination_city}. ğŸ”"

  utter_after_weather:
    - text: "What would you like to do next? ğŸ¤”"
      buttons:
        - title: "ğŸ’ Get Packing Tips"
          payload: "/recommend_packing"
        - title: "ğŸ“‹ Plan Complete Trip"  
          payload: "/start_travel_planning"
        - title: "ğŸŒ¤ï¸ Check Another City"
          payload: "/ask_weather"
        - title: "ğŸ  Main Menu"
          payload: "/greet"

  utter_after_packing:
    - text: "Hope that helps with your packing! What's next? ğŸŒŸ"
      buttons:
        - title: "ğŸŒ¤ï¸ Check Weather"
          payload: "/ask_weather"
        - title: "ğŸ“‹ Plan Complete Trip"
          payload: "/start_travel_planning"  
        - title: "ğŸ’ Pack for Another City"
          payload: "/recommend_packing"
        - title: "ğŸ  Main Menu"
          payload: "/greet"

  # CORRECTED a bug where {destination_city} might not be set
  utter_weather_options:
    - text: "I can provide weather information. Which city are you interested in?"
    
  # CORRECTED a bug where {destination_city} might not be set
  utter_packing_options:
    - text: "I can help with packing suggestions. What is your destination?"

actions:
  - action_get_weather
  - action_recommend_packing
  - action_provide_weather_options
  - action_provide_packing_options
  - validate_travel_info_form

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true